{
  "hash": "4575a80e3e6cddde245a83aaaaedf587",
  "result": {
    "markdown": "---\ntitle: \"Who bats best?\"\ndate: \"2016-10-09\"\ncategories: [animation, sport]\nimage: \"bat.jpg\"\ndescription: |\n  Cricket commentators often talk of changes in batting quality through the ages. Or they say that batting order matters to averages ... or vice-versa. But is there anything in these questions? In this post, I try and find out a bit.\n---\n\n\nLet's start with the data.\n\n## Data\n\nA couple of years ago, I downloaded the top 200 averages for each batting order from the wonderful stats engine at [espnCricinfo](http://stats.espncricinfo.com/ci/engine/stats/index.html). I then excluded averages from players with fewer than twenty innings. I also only considered results against Australia, England, India, New Zealand, Pakistan, South Africa, Sri Lanka and the West Indies. \n\nHaving done so, I now tidy this data below and show its first six rows, for reference.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuppressMessages(library(tidyverse))\nlibrary(gganimate)\nlibrary(ggiraph)\nlibrary(glue)\nlibrary(htmlwidgets)\ntheme_set(theme_bw())\n  \nbatOrder <- read_csv(\"BattingOrder.csv\") |>  \n  mutate(\n    Name = word(Player, start = 1L, end = -2L),\n    fullCountry = word(Player, -1),\n    Country = str_sub(fullCountry, 2,-2)) %>% \n  filter(\n    Country %in% c(\"Aus\", \"Ban\", \"Eng\", \"India\", \"NZ\", \"Pak\", \"SA\", \"SL\", \"WI\")\n    ) |> \n  mutate(\n    Start = as.integer(str_sub(Span, 1, 4)),\n    Decade = 10*trunc(Start/10),\n    Name = str_replace_all(Name, \"'\", \" \") \n    ) |> \n  select(Name, Country, Start, Decade, Ave, Innings = Inns, Runs, Bat)\n\nglimpse(batOrder, width = 70)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 873\nColumns: 8\n$ Name    <chr> \"B Mitchell\", \"JB Hobbs\", \"RB Simpson\", \"L Hutton\", …\n$ Country <chr> \"SA\", \"Eng\", \"Aus\", \"Eng\", \"India\", \"Eng\", \"Eng\", \"S…\n$ Start   <int> 1931, 1908, 1961, 1938, 2002, 1924, 1986, 1996, 1948…\n$ Decade  <dbl> 1930, 1900, 1960, 1930, 2000, 1920, 1980, 1990, 1940…\n$ Ave     <dbl> 65.04, 58.14, 58.03, 57.74, 55.19, 54.38, 53.84, 52.…\n$ Innings <dbl> 26, 87, 28, 120, 21, 20, 21, 41, 23, 90, 105, 74, 35…\n$ Runs    <dbl> 1431, 4768, 1567, 6236, 1159, 979, 1023, 2002, 1106,…\n$ Bat     <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n```\n:::\n:::\n\n\n</br>\n\n## Charts\n\nI then create the animation, using the splendid `gganimate`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbatOrder |> \n  ggplot(\n    aes(\n      x = Decade,\n      y = Ave,\n      color = Country, \n      size = Innings\n      )\n    ) +\n  geom_point(alpha = 1) +\n  labs(\n    x = \"Last decade of the batsman's career\",\n    y = \"\"\n    ) +\n  ggtitle(\n    'The 200 best players who have ever batted at {closest_state} in the order',\n    subtitle = 'Average when batting at that position'\n    ) + \n  transition_states(\n    states = Bat,\n    transition_length = 2,\n    state_length = 1\n    ) + \n  ease_aes('cubic-in-out') \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.gif)\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}